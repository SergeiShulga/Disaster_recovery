# 10.6 «Disaster recovery»

### Задание 1
В чём разница между DRaaS, BaaS, Active-Active, Active-Passive?
Приведите ответ в свободной форме.

#### DRaaS — это облачная служба, которая предоставляет предприятиям возможность быстро восстанавливать ИТ-системы и данные в случае стихийного бедствия, такого как стихийное бедствие, кибератака или отказ оборудования. Он работает путем репликации ваших данных и приложений в дополнительное место, которое можно активировать в случае аварии. Это позволяет предприятиям быстро восстанавливаться после сбоя и минимизировать время простоя.
#### BaaS — это облачная служба, которая предоставляет предприятиям безопасное удаленное место для хранения и защиты своих данных. Это может включать в себя все, от резервных копий критически важных данных до архивных записей и данных о соответствии требованиям. Решения BaaS обычно включают автоматизированное резервное копирование и восстановление данных и могут быть настроены в соответствии с конкретными требованиями к хранению данных.
DRaaS и BaaS служат разным целям. DRaaS ориентирован на аварийное восстановление, а BaaS — на защиту данных. Используя DRaaS позволяет быстро восстанавливаться после сбоя и свести к минимуму время простоя, а BaaS гарантирует, что их данные защищены и могут быть легко восстановлены в случае сбоя.

#### Наиболее часто используемыми конфигурациями отказоустойчивого кластера являются две модели, так называемыми "Active-Active" и "Active-Passive". Для удобства восприятия буду называть как "активный-активный" и "активный-пассивный". 
Кластер "активный-активный" обычно состоит как минимум из двух узлов, на каждом из которых одновременно запущены службы одного типа. Основная цель такого кластера — добиться балансировки нагрузки. Балансировка нагрузки распределяет рабочие нагрузки по всем узлам, чтобы предотвратить перегрузку любого отдельного узла. Поскольку для обслуживания доступно больше узлов, также будет заметно улучшение пропускной способности и времени отклика.
Пример, есть конфигурация состоящая из балансировщика нагрузки и двух HTTP-серверов. Вместо прямого подключения к HTTP-серверу веб-клиенты проходят через балансировщик нагрузки, который, в свою очередь, подключает каждого клиента к любому из стоящих за ним HTTP-серверов. Распределение клиентов между узлами в кластере, зависит от того, какой алгоритм балансировки нагрузки установлен в конфигурации. В картинке цифрами показана схема распределения клиентов для каждого узла.

![alt text](https://github.com/SergeiShulga/Disaster_recovery/blob/main/img/active.png)

Подобно конфигурации кластера "активный-активный", кластер "активный-пассивный" также состоит как минимум из двух узлов. Однако, как следует из названия "активный-пассивный", не все узлы будут активными. В случае двух узлов, например, если первый узел уже активен, второй узел должен быть пассивным или находиться в режиме ожидания. Пассивный сервер служит в качестве резервного узла, готового взять на себя обработку запросов, как только активный (основной) сервер отключается или не может обслуживать сервис.

![alt text](https://github.com/SergeiShulga/Disaster_recovery/blob/58c8fd067c7d2db2c162dd9b49fe8441c6cb732a/img/passive.png)

Различие между этими двумя архитектурами заключается в производительности. Кластеры "активный/активный" обеспечивают доступ к ресурсам на постоянном уровне производительности, заложенными в алгоритме балансировщика нагрузки. Например, при отказе одного узла, клиент не заметит просадок производительности сервиса. А в кластере "активный/пассивный", может потребоваться некоторое время для включения в работу резервного сервера.

### Задание 2
Компании нужно составить план восстановления в случае Disaster recovery. Сервер состоит из системного диска и диска с данными. Требуется копировать два логических диска на один физический:

системный диск (C:) (20 гигабайт);
диск с данными (D:) (256 гигабайт).
В требованиях говорится:

данные критичны в течение 24 часов после аварии;
сеть критична к большим потокам данных в рабочее время;
рабочее время с 9.00 до 18.00, пять дней (понедельник – пятница);
план резервирования должен быть реализован для диска C и для диска D. В случае Linux-систем /dev/sda1, /dev/sda4 или /dev/sdb1-данные;
считается, что для этой задачи может быть: 1) поставлен второй сервер или 2) выбрана облачная инфраструктура с определённой услугой;
компания готова платить за 10 терабайт места как в одном, так и в другом случае.
Приведите ответ в форме плана востановления с выбранным механизмом и получившейся топологией.

Настроить бэкапы и быстрое восстановление из облака (DRaaS Backup & Restore).
Создать параллельную инфраструктуру (параллельно основной  подготовить резервную инфра-структуру с репликой системы, с перенастроенными WAN-каналами, сетью и виртуальными ма-шинами, со всем необходимым софтом будут ожидать своего часа. 
Пассивная репликация:
Операции модификации сначала происходят в первичной реплике, а следом инструкции оправ-ляются на параллельную инфраструктуру, где происходят локальные расчёты и изменения. При отказе первичной реплики включается пассивная с небольшой задержкой.
Реализуя параллельную инфраструктуру есть несколько вариантов хранения, копирования и ре-зервирования данных:
1.	Основная и параллельная системы имеют общую отказоустойчивую СХД, а потому данные всегда поддерживаются в актуальном состоянии. Надёжность, зависит от отказоустойчивости СХД;
2.	Данные хранятся в разных хранилищах, но сначала записываются в рабочую систему, а потом копируются из основной в резервную. В случае аварии возможна потеря копируемых данных;
3.	Данные хранятся в разных хранилищах и параллельно записываются в них. Таким образом получается достигнуть полной сохранности информации и максимальной надежности.

Тут подойдет устройство НА-кластера по типу "активный-пассивный", в связи с тем что сеть кри-тична к большим потокам данных. Добавил второй физический сервер и объединил их в кластер и настроил резервное копирование на пассивном сервере. Полный бэкап раз в неделю и диффе-ренциальный бэкап раз в сутки. Помимо использования оборудования компании настроить об-лачные сервисы  DRaaS и BaaS.
И настроить систему оповещения специалиста в случае выхода из строя основного сервера для скорейшего его восстановления.
План восстановления:
При падении активного сервера проверить, включился ли пассивный сервер.
Если включился, определить причину падения активного.
После падения сначала нужно выяснить причину. Обычно существует пять общих причин бедствия или сбоя системы:
Аппаратный сбой
Отказ оборудования является одной из наиболее распространенных причин простоя системы. Яркими примерами являются отказы оборудования хранения данных ЦОД, такого как жесткие диски. Все аппаратные средства в какой-то момент могут выходит из строя. Вот почему компании должны иметь в запасе хорошую резервную копию.
Отключения электричества
Отключение электричества - еще одна возможная причина сбоя системы. Некоторые остановы в конечном счете повредят вашу компьютерную систему, что делает замены неизбежными. В таких случаях предприятия, не имеющие плана аварийного восстановления, могут понести значительные потери.
Стихийные бедствия
Предприятия могут также пострадать от разрыва непрерывности из-за стихийных бедствий, таких, как землетрясения, наводнения и т.д. Хотя остановить землетрясение невозможно, предприятия, имеющие надежные планы аварийного восстановления, могут свести к минимуму потери.
Человеческая ошибка
Человеческие ошибки и неправильная подготовка могут привести к значительным потерям. Простые происшествия, такие как удаление важного документа или невозможность сохранить правильную версию файла, могут привести к ужасным последствиям. Сотрудники должны пройти полную подготовку, с тем чтобы избежать таких ошибок по возможности.
Вредоносное программное обеспечение и вирусы
Убедитесь, что ваши системы полностью зашифрованы и защищены от злоумышленных нападе-ний. Зараженная система может в конечном итоге заразить всю сеть. Компании должны иметь надлежащие контрмеры для защиты себя от вирусов и программ-вымогателей.
Устранить причины.
Проверить бэкапы и данные из облачных сервисов.
Восстановить активный сервер из последнего бэкапа.
Создать новый полный бэкап.
Убедиться, что все работает и авария устранена.


Задания со звёздочкой*
Эти задания дополнительные. Их выполнять не обязательно. На зачёт это не повлияет. Вы можете их выполнить, если хотите глубже разобраться в материале.

Задание 3*
Используя программу R-sync, составьте конфигурацию для выполнения прошлой задачи.

Пришлите файл конфигурации.
